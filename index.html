<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descension by Lora Krasteva</title>
    <script src="https://player.vimeo.com/api/player.js"></script>
</head>
<body>
    <img src="Descension.png" style="width: 750px" alt="Poster for Descension by Lora Krasteva">
    <p></p>
    <!-- Embed Audio -->
    <audio id="myAudio" controls style="width: 750px; height: 10px">
        <source src="https://dl.dropbox.com/scl/fi/ukjarpbu85zjzsw3aho9f/Descension-by-Lora-Krasteva-23.13.26.wav?rlkey=4syxh7iz1bg6rbkd1kiisav5k&st=kavei7dn&dl=1" type="audio/mp3" />
    </audio>
<p></p>
    <button onclick="handleButtonClickEW()">Emily Webster</button>
    <button onclick="handleButtonClickJK()">Jacob Kay</button>
    <button onclick="handleButtonClickJL()">Jordan Laidley</button>
    <button onclick="handleButtonClickJS()">Jamie Stewart</button>
    <button onclick="handleButtonClickLT()">Laura Turner</button>
    <button onclick="handleButtonClickMAB()">Marilyn Ann Bird</button>
    <button onclick="handleButtonClickPS()">Peyvand Sadeghian</button>
    <button onclick="handleButtonClickVI()">Victor Itang</button>

    <p>STEP 1: Click play on the audio player above to begin</p>
    <p>STEP 2: Click on the buttons under the player to cast different performers</p>
    <p>STEP 3: ENJOY! (perhaps even with our optional soundscape below, adjusting its volume to your own preference)</p>

    <audio controls style="width: 750px; height: 50px">
        <source src="https://dl.dropbox.com/scl/fi/oqwy7v886f4fv3njhuib8/Descension-Backing-Track.wav?rlkey=wufabjdg4h1aovx5vfkqg4eyg&st=uniijkxa&dl=1" type="audio/mp3" />
    </audio>
 <p></p>

 

    <script>
        // Create a new Vimeo player instance
        //const iframe = document.getElementById('video');
        //const player = new Vimeo.Player(iframe);
        const ewList = [6000, 6003, 6012, 6014, 6017, 6021, 6024, 6029, 6031, 6033, 6035, 6039, 6041, 6044, 6045, 6046, 6048, 6053, 6058, 6058, 6065, 6067, 6068, 6068, 6072, 6077, 6085, 6090, 6092, 6096, 6099, 6103, 6108, 6111, 6123, 6135, 6163, 6188, 6221, 6221, 6221, 6221, 6221, 6221, 6221, 6221, 6221, 6240, 6262, 6302, 6324, 6324, 6324, 6369, 6369, 6383, 6383, 6395, 6589, 6594, 6639, 6702, 6706, 6740, 6756, 6760, 6765, 6765, 6816, 6834, 6838, 6847, 6847, 6847, 6853, 6875, 6875, 6892, 6920, 6950, 6950, 6950, 6950, 6990, 6990, 6990, 7000, 7007, 7027, 7052, 7080, 7088, 7088, 7095, 7095, 7125, "END"];
        const jkList = [1200, 1203, 1212, 1215, 1218, 1222, 1224, 1229, 1231, 1233, 1235, 1237, 1240, 1242, 1244, 1244, 1247, 1252, 1257, 1257, 1263, 1265, 1267, 1269, 1271, 1275, 1282, 1288, 1290, 1293, 1296, 1300, 1304, 1308, 1323, 1332, 1354, 1382, 1415, 1417, 1418, 1419, 1420, 1421, 1422, 1423, 1424, 1433, 1456, 1491, 1509, 1513, 1515, 1547, 1550, 1559, 1563, 1571, 1732, 1738, 1775, 1835, 1842, 1872, 1884, 1890, 1896, 1901, 1944, 1954, 1960, 1969, 1969, 1973, 1976, 1994, 1998, 2007, 2027, 2058, 2058, 2063, 2066, 2089, 2091, 2093, 2096, 2100, 2124, 2150, 2168, 2174, 2181, 2183, 2186, 2186, "END"];
        const jlList = [8400, 8404, 8414, 8417, 8420, 8425, 8427, 8435, 8437, 8439, 8441, 8444, 8447, 8450, 8450, 8453, 8455, 8462, 8466, 8466, 8473, 8476, 8477, 8478, 8489, 8494, 8502, 8508, 8510, 8516, 8519, 8523, 8527, 8532, 8553, 8572, 8601, 8640, 8671, 8687, 8688, 8689, 8690, 8691, 8692, 8693, 8694, 8717, 8750, 8805, 8830, 8835, 8845, 8892, 8896, 8906, 8910, 8917, 9123, 9130, 9187, 9264, 9274, 9319, 9332, 9341, 9352, 9361, 9409, 9428, 9435, 9447, 9447, 9447, 9451, 9487, 9490, 9498, 9522, 9556, 9556, 9556, 9564, 9603, 9609, 9613, 9616, 9626, 9648, 9680, 9714, 9724, 9731, 9734, 9736, 9768, "END"];
        const jsList = [3600, 3600, 3609, 3609, 3609, 3609, 3627, 3627, 3627, 3627, 3640, 3640, 3640, 3647, 3647, 3647, 3651, 3651, 3662, 3662, 3662, 3670, 3670, 3670, 3670, 3684, 3691, 3691, 3691, 3703, 3703, 3703, 3712, 3712, 3727, 3735, 3767, 3799, 3842, 3842, 3842, 3842, 3842, 3852, 3852, 3852, 3852, 3860, 3878, 3925, 3941, 3941, 3941, 3980, 3980, 3994, 4004, 4004, 4183, 4194, 4232, 4302, 4302, 4349, 4358, 4367, 4375, 4375, 4424, 4433, 4445, 4451, 4451, 4451, 4451, 4475, 4475, 4490, 4511, 4554, 4554, 4554, 4554, 4592, 4592, 4592, 4592, 4602, 4619, 4654, 4687, 4691, 4691, 4705, 4705, 4705, "END"];
        const ltList = [0, 4, 12, 16, 18, 22, 26, 33, 35, 36, 38, 41, 44, 46, 48, 49, 52, 56, 59, 59, 65, 68, 70, 72, 76, 81, 89, 94, 96, 99, 103, 108, 113, 117, 130, 143, 167, 198, 231, 234, 236, 239, 242, 242, 242, 247, 247, 254, 284, 320, 342, 346, 353, 390, 391, 392, 393, 394, 609, 615, 655, 730, 741, 776, 795, 795, 809, 815, 856, 865, 870, 877, 877, 877, 885, 908, 915, 925, 939, 969, 969, 969, 980, 1000, 1000, 1000, 1010, 1015, 1035, 1059, 1084, 1093, 1093, 1103, 1103, 1111, "END"];
        const mabList = [7200, 7203, 7209, 7213, 7215, 7218, 7220, 7226, 7227, 7229, 7231, 7234, 7238, 7240, 7241, 7243, 7245, 7250, 7255, 7257, 7262, 7265, 7267, 7267, 7274, 7277, 7285, 7289, 7289, 7295, 7298, 7301, 7305, 7309, 7330, 7338, 7360, 7389, 7431, 7434, 7435, 7436, 7437, 7438, 7439, 7440, 7441, 7442, 7477, 7519, 7540, 7543, 7543, 7582, 7586, 7595, 7600, 7608, 7799, 7809, 7847, 7923, 7932, 7974, 7986, 7986, 8001, 8006, 8060, 8075, 8080, 8090, 8090, 8090, 8101, 8119, 8119, 8136, 8155, 8185, 8185, 8185, 8194, 8221, 8221, 8221, 8228, 8233, 8259, 8285, 8309, 8317, 8326, 8326, 8332, 8336, "END"];
        const psList = [2406, 2409, 2416, 2419, 2421, 2424, 2426, 2430, 2431, 2433, 2435, 2437, 2440, 2442, 2444, 2445, 2446, 2451, 2455, 2455, 2461, 2463, 2465, 2465, 2469, 2473, 2481, 2485, 2487, 2490, 2493, 2497, 2501, 2503, 2517, 2526, 2544, 2568, 2595, 2595, 2595, 2595, 2595, 2603, 2603, 2603, 2603, 2612, 2629, 2658, 2674, 2676, 2676, 2709, 2709, 2716, 2720, 2724, 2873, 2879, 2906, 2958, 2964, 2986, 2999, 3004, 3010, 3012, 3049, 3057, 3062, 3070, 3070, 3070, 3074, 3095, 3099, 3103, 3117, 3139, 3139, 3139, 3145, 3163, 3165, 3167, 3169, 3171, 3190, 3207, 3226, 3230, 3230, 3237, 3239, 3239, "END"];
        const viList = [4800, 4805, 4813, 4818, 4821, 4823, 4830, 4837, 4839, 4843, 4847, 4847, 4852, 4855, 4857, 4858, 4861, 4866, 4873, 4873, 4873, 4883, 4885, 4888, 4895, 4900, 4906, 4911, 4911, 4917, 4920, 4925, 4929, 4933, 4960, 4971, 4998, 5036, 5066, 5066, 5071, 5073, 5075, 5078, 5081, 5083, 5083, 5093, 5117, 5159, 5188, 5192, 5196, 5235, 5239, 5249, 5251, 5255, 5453, 5460, 5499, 5569, 5574, 5606, 5617, 5621, 5626, 5635, 5679, 5689, 5694, 5702, 5702, 5702, 5707, 5728, 5733, 5742, 5759, 5789, 5789, 5789, 5794, 5826, 5828, 5832, 5835, 5839, 5859, 5893, 5923, 5929, 5929, 5936, 5940, 5940, "END"];

        let myList = ltList;

        console.log(myList);

        // Function to handle button click event
        function handleButtonClickEW() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(ewList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = ewList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickJK() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(jkList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = jkList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickJL() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(jlList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = jlList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickJS() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(jsList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = jsList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickLT() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(ltList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = ltList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickMAB() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(mabList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = mabList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickPS() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(psList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = psList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to handle button click event
        function handleButtonClickVI() {
            const audio = document.getElementById("myAudio");
            let currentTime = Math.round(audio.currentTime);
            let newTime = currentTime;
            let captionPosition = -1;

            while (newTime > -1) {
                captionPosition = getNumberAtIndex(viList, myList.indexOf(newTime));
                console.log(currentTime, newTime, captionPosition);
                if (captionPosition > -1) {
                    break;
                } else {
                    newTime--;
                }
            }

            console.log('Current time:', currentTime, 'Skipping to:', captionPosition);
            myList = viList;
            if (captionPosition > -1) {
            audio.currentTime = captionPosition;
            }
        }

        // Function to get an array item by index
        function getNumberAtIndex(array, index) {
            // Check if the index is valid
            if (index >= 0 && index < array.length) {
                return array[index];  // Return the value at the given index
            } else {
                return undefined;  // Return undefined if index is out of bounds
            }
        }

        // Force focus back to the parent document whenever the iframe is clicked
        iframe.addEventListener('click', function() {
            window.focus(); // Refocus the parent window to capture key events
        });

        // Ensure the parent window always captures key events even when iframe is focused
        window.addEventListener('focus', function() {
            window.focus(); // Keep focus on the parent window
        });

        // Force the parent window to focus whenever the play or pause button is clicked
        player.on('play', function() {
            window.focus(); // Refocus on the parent window when the video plays
        });

        player.on('pause', function() {
            window.focus(); // Refocus on the parent window when the video pauses
        });

        // Get the button element from the UI (Assuming the button has an ID 'skipButton')
        //const skipButton = document.getElementById('skipButton');

        // Add event listener to listen for button clicks
        //skipButton.addEventListener('click', handleButtonClick);

        // Add event listener for keydown to detect key presses on the entire window
        //window.addEventListener('click', handleKeyPress);

    </script>

</body>
</html>
